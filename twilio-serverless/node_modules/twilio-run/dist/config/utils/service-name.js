"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getServiceNameFromFlags = void 0;
const utils_1 = require("../../commands/utils");
const logger_1 = require("../../utils/logger");
const package_json_1 = require("./package-json");
const debug = (0, logger_1.getDebugFunction)('twilio-run:config:utils');
async function getServiceNameFromFlags(flags) {
    let { serviceName, cwd } = flags;
    if (typeof flags.projectName !== 'undefined') {
        (0, utils_1.deprecateProjectName)();
        if (!serviceName) {
            serviceName = flags.projectName;
        }
    }
    if (!serviceName && cwd) {
        try {
            const pkgJson = await (0, package_json_1.readPackageJsonContent)(flags);
            if (typeof pkgJson.name === 'string') {
                serviceName = pkgJson.name;
            }
        }
        catch (err) {
            debug('%O', err);
        }
    }
    return serviceName;
}
exports.getServiceNameFromFlags = getServiceNameFromFlags;
